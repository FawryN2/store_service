<div class="stock-detail">
  <div class="page-header">
    <button class="btn btn-outline" (click)="goBack()">
      ← Back to Stocks
    </button>
  </div>

  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Loading stock details...</p>
  </div>

  <div *ngIf="error" class="alert alert-error">
    {{ error }}
    <button class="btn btn-primary" (click)="loadStockDetails()">Retry</button>
  </div>

  <div *ngIf="!loading && !error && stock">
    <!-- Stock Information -->
    <div class="stock-info-card">
      <div class="stock-header">
        <div class="stock-icon">📦</div>
        <div class="stock-details">
          <h1>{{ stock.sku }}</h1>
          <p class="store-info" *ngIf="store">🏪 {{ store.name }} - {{ store.location }}</p>
          <p class="stock-id">Stock ID: {{ stock.id }}</p>
        </div>
        <div class="stock-status">
          <div class="quantity-display" [class]="getStockStatusClass()">
            {{ stock.quantity }}
          </div>
          <span class="status-badge" [class]="getStockStatusClass()">
            {{ getStockStatus() }}
          </span>
        </div>
      </div>
    </div>

    <!-- Statistics -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">📊</div>
        <div class="stat-content">
          <h3>{{ stock.quantity }}</h3>
          <p>Current Stock</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">📤</div>
        <div class="stat-content">
          <h3>{{ getTotalConsumed() }}</h3>
          <p>Total Consumed</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">📋</div>
        <div class="stat-content">
          <h3>{{ transactions.length }}</h3>
          <p>Transactions</p>
        </div>
      </div>
    </div>

    <!-- Stock Information Details -->
    <div class="info-section">
      <h2>📋 Stock Information</h2>
      <div class="card">
        <div class="info-grid">
          <div class="info-item">
            <span class="info-label">📦 SKU:</span>
            <span class="info-value sku">{{ stock.sku }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">🏪 Store:</span>
            <span class="info-value">{{ store?.name || 'Unknown Store' }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">📍 Location:</span>
            <span class="info-value">{{ store?.location || 'Unknown Location' }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">📅 Created:</span>
            <span class="info-value">{{ stock.createdAt | date:'medium' }}</span>
          </div>
          <div class="info-item" *ngIf="stock.updatedAt">
            <span class="info-label">🔄 Last Updated:</span>
            <span class="info-value">{{ stock.updatedAt | date:'medium' }}</span>
          </div>
          <div class="info-item">
            <span class="info-label">📊 Status:</span>
            <span class="status-badge" [class]="getStockStatusClass()">
              {{ getStockStatus() }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Transaction History -->
    <div class="transactions-section">
      <div class="section-header">
        <h2>📋 Transaction History</h2>
      </div>

      <div *ngIf="transactions.length === 0" class="empty-state">
        <div class="empty-icon">📋</div>
        <h3>No Transactions</h3>
        <p>No consumption transactions have been recorded for this stock item</p>
      </div>

      <div *ngIf="transactions.length > 0" class="card">
        <table class="table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Consumed Quantity</th>
              <th>Transaction ID</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of getRecentTransactions()">
              <td>{{ transaction.createdAt | date:'medium' }}</td>
              <td>
                <span class="consumed-badge">-{{ transaction.consumedQuantity }}</span>
              </td>
              <td>
                <span class="transaction-id">{{ transaction.id }}</span>
              </td>
            </tr>
          </tbody>
        </table>
        
        <div *ngIf="transactions.length > 10" class="table-footer">
          <p>Showing 10 most recent transactions out of {{ transactions.length }} total</p>
        </div>
      </div>
    </div>
  </div>
</div>